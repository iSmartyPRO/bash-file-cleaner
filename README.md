# Скрипт для очистки файлов

Этот репозиторий содержит Bash-скрипт для автоматической очистки старых файлов в указанной директории. Скрипт удаляет файлы, которые старше заданного количества дней, с возможностью ведения лога для отслеживания выполненных действий и удаленных файлов.

## Возможности

- **Автоматическая очистка**: Скрипт удаляет файлы, старые более заданного количества дней.
- **Логирование**: Все действия (включая ошибки и удаленные файлы) записываются в указанный лог-файл.
- **Настройка**: Параметры, такие как целевая директория, количество дней и путь к лог-файлу, настраиваются через файл `.env`.
- **Простота использования**: Скрипт готов к автоматическому запуску через cron для регулярного выполнения.

## Требования

- Операционная система Linux с поддержкой Bash и cron.
- Установленная команда `find` (обычно она предустановлена в большинстве Linux-дистрибутивов).

## Установка

1. **Клонируйте репозиторий**:
   ```bash
   git clone https://github.com/yourusername/file-cleaner.git
   cd file-cleaner
   ```

2. **Настройте файл .env: Создайте или отредактируйте файл .env в корне проекта с параметрами:**
    ```bash
    TARGET_DIR=/путь/к/директории
    DAYS=3
    LOG_FILE=/путь/к/лог-файлу
    ```

3. **Дайте права на выполнение скрипту:**

    ```bash
    chmod +x /apps/scripts/file-cleaner.sh
    ```

4. **Запуск скрипта: Чтобы запустить скрипт вручную:**
    ```bash
    /apps/scripts/file-cleaner.sh /apps/scripts/config.env
    ```

# Использование с cron

Для автоматического запуска скрипта каждый день в 23:00 добавьте следующую строку в crontab:

```bash
0 23 * * * /apps/scripts/file-cleaner.sh /apps/scripts/config.env
```

# Логирование

Логи выполняемых действий записываются в файл, указанный в .env в параметре LOG_FILE. Это может быть полезно для отслеживания процесса очистки и для диагностики ошибок.

## Пример логов

* Логи об успешной очистке файлов:

    ```
    [2024-11-21 23:00:01] Очистка завершена. Удалены файлы: /path/to/oldfile1, /path/to/oldfile2
    ```

* Логи об ошибках:

    ```
    [2024-11-21 23:00:01] Ошибка: Папка не найдена: /path/to/directory
    ```